


DB name : sr_data

tables:

sr_session
sr_users
sr_groups
sr_users_acl
sr_groups_acl


CREATE TABLE sr_session ( 
	id char(32),
	modified int,
	lifetime int,
	data text,
	PRIMARY KEY (id)
);

CREATE TABLE sr_users ( 
	uid int NOT NULL,
	gid int NOT NULL,
	username VARCHAR[40] NOT NULL,
	firstname VARCHAR[40],
	lastname VARCHAR[40],
	title VARCHAR[40],
	last_login int,
	PRIMARY KEY (uid)
);

CREATE TABLE sr_groups (
	gid int NOT NULL,
	groupname VARCHAR[40],
	parent_gid int,
	PRIMARY KEY (gid)
);

CREATE TYPE resType AS ENUM ('module','layer');
CREATE TYPE permitType AS ENUM ('allow','deny');

CREATE TABLE sr_acl_permissions (
	permission_id SERIAL NOT NULL,
	entity_id INT NOT NULL,
	resource_type resType NOT NULL,
	resource_id INT NOT NULL,
	permission_read permitType NOT NULL DEFAULT 'deny',
	permission_write permitType NOT NULL DEFAULT 'deny',
	permission_admin permitType NOT NULL DEFAULT 'deny',
	PRIMARY KEY (permission_id)
);

create TABLE sr_modules (
	id SERIAL NOT NULL,
	name VARCHAR[128] NOT NULL,
	PRIMARY KEY(id)
);

CREATE TYPE layer_type AS ENUM ('XYZ','Vector','WFS','GeoRSS');
CREATE TYPE layer_format AS ENUM ('GML','WFST');
CREATE TABLE sr_layers (
	id SERIAL NOT NULL,
	name VARCHAR[128] NOT NULL,
	type LAYER_TYPE,
	format LAYER_FORMAT,
	isBaseLayer BOOLEAN,
	projection VARCHAR[16],
	visibility BOOLEAN NOT NULL DEFAULT TRUE,
	sphericalMercator BOOLEAN NOT NULL DEFAULT FALSE,
	url VARCHAR[128],
	numZoomLevels int,
	attribution VARCHAR[128],
	PRIMARY KEY(id)
);













